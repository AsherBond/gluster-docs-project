commit e1e5326c22b6b64784a7562ce7ef462841f39609 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Wed Oct 10 15:18:06 2012 +0530

------------------------------------------------------------------------------
   storage/posix: return -1 if lstat call returns non zero value apart from -1
   
   * If lstat() call in posix_{pstat, istat} returns non zero return value
     other than -1, then treat lstat() call to have been failed and return -1
     itself. This might happen if there is some bug in the backend filesystem.
   
   Change-Id: Ie23787f6c838f14f92edadad71b83471e3d22289
   BUG: 864401
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.org/4054
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
------------------------------------------------------------------------------

commit e7f14ad073956b08b37d7b102afab57a08dfabac Author: Vijay Bellur
<vbellur@redhat.com> Date: Thu Oct 11 22:31:13 2012 +0530

--------------------------------------------------------------
   build: Add glusterd man page packaging in buildspec
   
   Change-Id: Id412a2738b80516bbfc0a9ad7862a45821703c3e
   BUG: 825906
   Reviewed-on: http://review.gluster.org/4064
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Sachidananda Urs <sacchi@gmail.com>
--------------------------------------------------------------

commit 517a9d2450c4de6229d2b699a2ffd9102c3488c9 Author: Kaleb S.
KEITHLEY <kkeithle@redhat.com> Date: Thu Sep 13 16:21:07 2012 -0400

------------------------------------------------------------------------
   glusterfs SEGV on Fedora 17 from UFO fallocate(2) call
   
   An upload of a file will cause the volume's glusterfs to SEGV
   when it fields a FUSE_FALLOCATE op. Swift inspects libc to determine
   if there is a symbol for fallocate(2) and if so will use it. And
   while the libc in RHEL 6 does have fallocate(2), the version of
   fuse in RHEL 6 does not support fallocate, and things are handled
   gracefully elsewhere (the kernel perhaps?)
   
   N.B. fallocate was added to version 7.19 of fuse. Fedora 17 and
   later (and maybe earlier too) has 7.19. RHEL 6 still has 7.13.
   Glusterfs uses the 7.13 version <linux/fuse.h>
   (in contrib/fuse-include/fuse_kernel.h)
   
   Thus on Fedora 17, with both fallocate(2) in libc and fallocate
   support in fuse, the fallocate invocation is dispatched to glusterfs,
   but the dispatch table (fuse_std_ops in
   xlators/mount/fuse/src/fuse-bridge.c) is too short for one thing;
   the fallocate opcode (43) indexes beyond the end of the table, and
   even when that doesn't directly cause a SEGV, the NULL pointer at
   that location does cause a SEGV when attempting to call the function
   through the pointer.
   
   BUG: 856704
   Change-Id: Iffe3994dde6ca29444d07d27eb04d6f86773fa03
   Signed-off-by: Kaleb S. KEITHLEY <kkeithle@redhat.com>
   Reviewed-on: http://review.gluster.org/3941
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Mohammed Junaid <junaid@redhat.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
------------------------------------------------------------------------

commit 314dd4da976cd329417b43c3ad281fd9990fdcd7 Author: Kaushal M
<kaushal@redhat.com> Date: Wed Aug 22 16:53:04 2012 +0530

---------------------------------------------------------------------
   mount.glusterfs: Add support for {attribute,entry}-timeout options
   
   Change-Id: Ib0c9b5be6f05cf9a36271df67e5e5c251c4c4628
   BUG: 829279
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.org/3840
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Brian Foster <bfoster@redhat.com>
   Reviewed-by: Jeff Darcy <obdurodon@gmail.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
---------------------------------------------------------------------

commit 948b9a5aa1dccdd0cf00e95e24409ff3dbe25139 Author: Kaushal M
<kaushal@redhat.com> Date: Mon Jun 4 10:13:19 2012 +0530

------------------------------------------------------------------------
   glusterd: nfs.disable fix for "volume set help"
   
   Fixes volgen to include "nfs.disable" in output of "volume set help".
   
   Change-Id: Idaac2cee04b7b38aad5a77db558808c0eb699fcf
   BUG: 828027
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.org/3881
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
------------------------------------------------------------------------

commit 21ed135a5ab503ba31048a983038d354c0f7a1b2 Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Thu Sep 13 12:33:31 2012 +0530

--------------------------------------------------------------
   cli: Fix double free in cli_add_key_group
   
   Change-Id: I3c2f030ac7c53913612a3fbac5e582c47b005621
   BUG: 851237
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3944
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
--------------------------------------------------------------

commit 2635c4a68d82be731461bb3c31188e5dd0093e7d Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Sun Sep 2 15:22:34 2012 +0530

-----------------------------------------------------------------------
   storage/posix: Option to set brick(of a volume)'s root dir's uid/gid
   
   CLI
   ---
   gluster volume set VOLNAME owner-uid uid
   gluster volume set VOLNAME owner-gid gid
   where uid,gid are the owner's user id and group id respectively that
   would be set on the root of all brick (backend) fs.
   
   TODO: uid/gid should not be -1. Today we don't validate that in CLI.
   
   Change-Id: Ib6a2fb5e404691c5fe105a89faaeff3e1ab72e91
   BUG: 853842
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3939
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-----------------------------------------------------------------------

commit 80ef34fea4a8850b6f34dc59dcdfaef989d7b9e5 Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Mon Sep 10 16:07:13 2012 +0200

-------------------------------------------------------------------
   mount.glusterfs NerBSD portability fix
   
   NetBSD stat(1) gets inode using -f %i while Linux uses -c %i
   This has already been fixed a few lines above, but one test
   failed to be fixed.
   
   This is not based on master, as the code hasbeen reworked a lot,
   and is already bug-free.
   
   BUG: 764655
   Change-Id: I5dc1196ddba06ff31f695b7dbb0c6d28df32f324
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.org/3926
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-------------------------------------------------------------------

commit 700ed44e73fee15d678654830c4cb019ffaeb4af Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Mon Aug 20 21:34:26 2012 +0530

-----------------------------------------------------------------------------
   cli: Added special key "group" for bulk volume set.
   
   gluster volume set VOLNAME group group_name
   
   - where group_name is a file under /var/lib/glusterd/groups containing one
     key, value pair per line as below,
     key1=value1
     key2=value2
     [...]
   - the command sets key1 to value1 and so on.
   
   Change-Id: Ic4c8dedb98d013b29a74e57f8ee7c1d3573137d2
   BUG: 851237
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3896
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-----------------------------------------------------------------------------

commit ace4cae71c19004c51fe5116c67492acaf2afc73 Author: Kaushal M
<kaushal@redhat.com> Date: Wed Aug 29 18:32:29 2012 +0530

--------------------------------------------------------------
   cli: Proper xml output for "gluster peer status"
   
   Change-Id: I90952ba2ea606552cf4ad67dd296a440f90592d6
   BUG: 847760
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.org/3870
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit 50cb2c23e8e7bd1173572a21990dbdf545f09141 Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Tue Aug 28 17:29:53 2012 +0530

---------------------------------------------------------------------
   glusterd: Fixed incorrect assumptions in rpcsvc actors of glusterd
   
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3864
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
   
   Conflicts:
   
    xlators/mgmt/glusterd/src/glusterd-handler.c
   
   Change-Id: Iabfcb401de9d658e32433aa1e8c87b329cbd2cf7
   BUG: 851109
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3876
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
---------------------------------------------------------------------

commit 84298d77060772b91123d9cde9f0e6e4d9efc9ca Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Tue Aug 28 13:12:31 2012 +0530

---------------------------------------------------------------------------------
   glusterfsd: rpcsvc actors must return success after an attempt to submit reply
   
   rpcsvc attempts to send "error reply" using the req object. If actor has
   already performed rpcsvc_submit_generic, then req is destroyed. So if the
   actor returned -1 (RPCSVC_ACTOR_ERROR) on failing to submit reply, then req
   would be 'free'd' twice and will result in a crash eventually.
   
   Change-Id: I5eae19570202bbe5e154e9cb03390cfeb9b5f223
   BUG: 851410
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.org/3863
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
   Reviewed-on: http://review.gluster.org/3875
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
---------------------------------------------------------------------------------

commit e908ee20e8a87ba1170f228dd4dd5993f36a0da6 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Mon Jun 4 23:23:45 2012 +0530

--------------------------------------------------------------
   Self-heald: Fix inode leak
   
   RCA:
   There is an inode-leak because inode_link returns
   linked inode by taking a reference. That needs to be
   unreffed.
   
   Fix:
   Added the code to perform unrefs. In addition to that
   updated the loc inode with the linked-inode because that is
   the best practice. The code to update the input inode's
   gfid can be removed later, its already removed in master.
   
   Tests:
   Checked that opendir comes with an loc with valid inode
   Checked that re-opendir happens successfully. Tested index,
   full self-heal work fine with the fix.
   
   BUG: 826580
   Change-Id: I0c68192ff98f76152ed112b393d497b8fee93355
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.org/3518
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit f382d5c5656301d9b426dc50a95e8c54db42c90e Author: shishir gowda
<sgowda@redhat.com> Date: Tue Aug 28 14:45:47 2012 +0530

-------------------------------------------------------------------
   dht/rebalance: set the correct ownership on the dst file.
   
   Currently, the dst file created has root:root ownership, till
   migration is completed. During this phase, open fails on the dst
   file if uid/gid is non-root.
   Setting the dst_file to the correct ownership fixes the issue
   
   Change-Id: Icfec89eb10dc866cdee38dab17695fe21174ef99
   BUG: 852361
   Signed-off-by: shishir gowda <sgowda@redhat.com>
   Reviewed-on: http://review.gluster.org/3862
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
-------------------------------------------------------------------

commit 10617e6cbc73329f259b471327d88375352042b0 Author: shishir gowda
<sgowda@redhat.com> Date: Thu Aug 23 18:34:09 2012 +0530

------------------------------------------------------------------
   storage/posix: implement native linux AIO support
   
   Configurable via cli with "storage.linux-aio" settable option
   Backported Avati's patch http://review.gluster.org/#change,3627
   
   BUG: 837495
   Change-Id: Ia7c26f5734d34d341debd422a5c59bba31eef844
   Signed-off-by: shishir gowda <sgowda@redhat.com>
   Reviewed-on: http://review.gluster.org/3849
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
------------------------------------------------------------------

commit d0c52c8064a4097d97180240b36c53bfe98cac22 Author: Varun Shastry
<vshastry@redhat.com> Date: Mon Aug 13 15:50:45 2012 +0530

--------------------------------------------------------------
   cli/: Displaying the size in human readable format
   
   rebalance status displaying the size in bytes. Converted to
   human readable
   
   Change-Id: Id73b6e792c39b85480ddf1dc9c0c22fcaca29530
   BUG: 825193
   Signed-off-by: Varun Shastry <vshastry@redhat.com>
   Reviewed-on: http://review.gluster.org/3810
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Kaushal M <kaushal@redhat.com>
--------------------------------------------------------------

commit 753f8c13245220c4b9ec6364a5e644274a36b1d6 Author: Krishnan
Parthasarathi <kparthas@redhat.com> Date: Fri Aug 17 14:19:39 2012 +0530

-------------------------------------------------------------------------
   afr: Avoid excessive logging in self-heal.
   
   - (Excessive) Logging has been very useful as 'bread-crumbs' in
     many a root-cause analyses. This patch aims at avoiding logging when
     the information could be reconstructed using the xattrs, statedump,
     and/or "volume heal" CLI commands.
   
   Change-Id: I8f646cbee44e98495ea6963f9dfcae95375c8900
   BUG: 844804
   Signed-off-by: Krishnan Parthasarathi <kparthas@redhat.com>
   Reviewed-on: http://review.gluster.com/3827
   Reviewed-by: Pranith Kumar Karampuri <pranithk@gluster.com>
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-------------------------------------------------------------------------

commit 1df75bc835a75f17fa0fcd3722ef68f05f5f3200 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Mon Jul 30 21:01:21 2012 +0530

-----------------------------------------------------------------------
   cluster/afr: Handle child_up & fd not opened case in xaction
   
   RCA:
   When an fd is opened while a brick is down, after the brick
   comes back up afr issues open on the other brick. It can
   fail for a number of reasons (enoent etc). While the system
   is in that state, inode/entrylks pre-op happen only on the
   brick that is up and fd is opened for fd-fops. post-op should
   consider only the bricks where both pre-op and fop succeeded
   as success, rest of them as failures. Code now marks only the
   children that are down as failures as opposed to child_down &
   fd-not-opened. This makes change-log appear as success on the
   subvolume where we did not do any fop leading to no change-log
   but differences in data/metadata for reg-files.
   
   Fix:
   Mark non-participants of fop as failure. This is tracked in
   transaction.pre_op[].
   
   Tests:
   Simulated the scenario using err-gen on top of one of the client
   xlator which fails all fops always. Performed fops and the changelog
   represented pending fops on the brick with err-gen loaded. Tested
   the case of brick down and perform entry/metadata/data operations
   to confirm they still work as expected.
   
   Change-Id: I41905936126b19abba56ca581c0301a894507e1a
   BUG: 844987
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3776
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-----------------------------------------------------------------------

commit 30a9ebd91339f36d092f46bbba116fa4047fb8c5 Author: Kaushal M
<kaushal@redhat.com> Date: Fri Aug 17 13:12:33 2012 +0530

----------------------------------------------------------------------------------
   rpc: Reduce frame-timeout for glusterd connections
   
   Reduce frame-timeout for glusterd connections from 30mins to 10 mins. 30mins is
   too long when compared to cli timeout of 2mins. Changing to 10mins reduces the
   disparity between cli and glusterd.
   
   Also, fix glusterfs_submit_reply() so that a reply is sent even if serialize
   failed.
   
   BUG: 843003
   Change-Id: Ie8d5ec16fbbb54318a5935a47065e66fd3338b87
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.com/3812
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------------------

commit b96e499e9e290547a655072fede969f51854e2d8 Author: Amar Tumballi
<amarts@redhat.com> Date: Sat Jul 14 08:25:56 2012 +0530

--------------------------------------------------------------------------
   core: check for pre-allocated blocks in backend fs, fix it.
   
   There is a possibility that the backend FS (like XFS) can
   allocate blocks beyond EOF for better performance reasons, which
   results in 'st_blocks' with higher values than what is consumed by
   the file descriptor. This would break few logic inside GlusterFS,
   like quota behavior etc, thus we need the exact number of blocks
   which are consumed by the file to the higher layers inside GlusterFS.
   
   Currently, this logic won't work for sparse files (ie, file with holes)
   
   Change-Id: Ied216733a8862e84f7da8386ae0a144f3f5cd5f2
   BUG: 839589
   Signed-off-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-on: http://review.gluster.com/3671
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------------------

commit 502c95bdfb35640fb424b37b080664e9c1639a86 Author: shishir gowda
<sgowda@redhat.com> Date: Mon Aug 13 11:20:17 2012 +0530

--------------------------------------------------------------
    cluster/dht: Optimize readdirp calls in DHT
   
   Bring in option which is supported by posix xlator
   to filter out directory's entries from being returned.
   DHT would now request non-first subvols to filter out
   directory entries.
   
   dht xlator-option readdir-optimize will enable this
   optimization
   
   Change-Id: Ibf99f1bef501f285ff44a1cecfbebee9e16063b6
   BUG: 838199
   Signed-off-by: shishir gowda <sgowda@redhat.com>
   Reviewed-on: http://review.gluster.com/3806
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit 28328417bff73b13392e95a07c3d359c881bebc8 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Thu Aug 9 17:47:34 2012 +0530

-------------------------------------------------------------------------------
   performance/io-cache: use pthread_mutex_trylock to hold mutex in statedumps
   
   Do not use pthread_mutex_lock and gf_log functions while dumping information
   to statedump, to avoid deadlocks.
   
   Change-Id: I6569366856fc2bc0fefb49c8379e2e4337717ce4
   BUG: 843787
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3799
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-------------------------------------------------------------------------------

commit cb7647f67390920fa2aa25fd0af7c84787c08ed0 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Mon Aug 13 19:16:43 2012 +0530

----------------------------------------------------------------------------------
   performance/write-behind: use pthread_mutex_trylock to hold mutex in statedumps
   
   Change-Id: I24c83b1b5e83ef3e38a019043c7fbca13b19ff43
   BUG: 841543
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3815
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------------------

commit 41d3605fab2f0ce8c8b4c5d976fc1a013c823e3d Author: Shylesh Kumar
<shmohan@redhat.com> Date: Mon Aug 13 12:10:38 2012 +0530

--------------------------------------------------------------
   cluster/stripe: Filter coalesce xattr from getfattr
   
   Change-Id: I1c5740e29699ef464a3d30365396711f03c24974
   Signed-off-by: Shylesh Kumar <shmohan@redhat.com>
   BUG: 801887
   Reviewed-on: http://review.gluster.com/3809
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Shishir Gowda <sgowda@redhat.com>
--------------------------------------------------------------

commit 3e5e736043cdb0f48ce617d71c974912a96acef0 Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Mon Aug 13 15:00:45 2012 +0200

---------------------------------------------------------------
   NetBSD swapcontext() portability fix
   
   This is a backport of http://review.gluster.com/#change,3794
   Patchset 8d47741d5a041e632d9c74c5936fcfaf6ceaaa78
   
   This has been tested on release-3.3 for a few days.
   
   BUG: 764655
   Change-Id: I75d990649e9cdfbd7dd327ed1071f6ab7ab49f4a
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3813
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
---------------------------------------------------------------

commit 12aa31278c651f36c2ea1c0698ba789aa3f9262c Author: Pranith Kumar K
<pranithk@gluster.com> Date: Wed Jul 18 10:28:18 2012 +0530

-------------------------------------------------------------------
   cluster/afr: Avoid setting split-brain outside inode locks
   
   RCA:
   The bug is observed because the decision to mark
   a file in split-brain is taken outside appropriate locks.
   Lookup gathers xattrs outside any lock. The xattrs being
   in split-brain in lookup should only be taken as a hint.
   Appropriate inodelks should be taken before confirming
   a split-brain. Self-heal confirms this at the moment.
   
   Fix:
   Self-heals are launched to inspect xattrs when the
   data/metadata self-heal options are turned on.
   Decision to set/reset split-brain flag is taken inside
   appropriate locks.
   
   Known Issue After fix:
   If data/metadata self-heal is turned off, inspecting of
   xattrs could not be performed so split-brain behavior
   does not work correctly if the self-heal options are turned off.
   This bug is handled only in upstream.
   
   Change-Id: I59a43d5ce7bf9ca35bff54a51bf4cfa55d717a9e
   BUG: 833727
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3691
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-------------------------------------------------------------------

commit aa4e7d04ff20e38182a62576595951d59524fff0 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Sat Jul 28 12:18:50 2012 +0530

---------------------------------------------------------------------
   features/locks: Fix statedump code
   
   RCA:
   Taking blocking mutex/spin locks lead to dead locks
   because of the locking order in statedumps. Also we
   were asked to remove gf_logs if possible to avoid extra
   cost in signal handlers.
   
   Fix:
   changed blocking mutes/spin locks to their non-blocking variants.
   Removed gf_logs in locks xlator statedump code-path.
   
   Tests:
   State-dump success cases are working fine.
   Triggered try-lock failures by putting statedumps in a while loop.
   In parallel did chown of the same file in a while loop.
   
   BUG: 843781
   Change-Id: Iac9b75d79cd5e036cd3eafc1e106074e2c6b5c47
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3752
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
---------------------------------------------------------------------

commit d40d5a3a32a515ff29c71467a0f701e91ae99718 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Fri Jul 27 10:51:50 2012 +0530

----------------------------------------------------------------------
   performance/io-threads: Provide option to turn off least-priority
   
   RCA:
   In cases when self-heal is in progress, self-heal fops are starved
   because of least-priority. This affects other fops with conflicting
   inode, entry locks with self-heal.
   
   Fix:
   This patch provides configuring enable/disable of least-priority.
   
   Additional changes:
   Moved RCHECKSUM fop to low instead of least because it will still
   affect the performance of other fops if RCHECKSUM is in LEAST
   priority.
   
   Tests:
   Tested that the enabling/disabling of fops is working fine.
   Tested that RCHECKSUM fop priority is assigned LOW when
   least-priority is disabled.
   
   BUG: 843704
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Change-Id: I892f99d6d0a3e0ae6c0a280f82e2203af0c346f6
   Reviewed-on: http://review.gluster.com/3751
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------

commit e427d39d629b8f89c25ac7f7a9d1eeca25b9579a Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Thu Aug 9 18:25:31 2012 +0530

--------------------------------------------------------------------------------
   performance/read-ahead: use pthread_mutex_trylock to hold mutex in statedumps
   
   Change-Id: I4de64915a9c6a46e126ef4a5b987e49de558f827
   BUG: 843796
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3801
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------------------------

commit 92d722fdbeb3ce7316d8bf3a40ae2ac27e06b806 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Thu Aug 9 18:19:09 2012 +0530

--------------------------------------------------------------------------------
   performance/quick-read: use pthread_mutex_trylock to hold mutex in statedumps
   
   Do not use pthread_mutex_lock and gf_log functions while dumping information
   to statedump, to avoid deadlocks.
   
   Change-Id: Ic77d96bc52f2a2a32629c0ae20bba797317e0a81
   BUG: 843789
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3800
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------------------------

commit c79690c4cb503a6e6b52998038fd85cdfcf0f7be Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Thu Aug 9 18:33:37 2012 +0530

----------------------------------------------------------------------
   protocol/server: use pthread_mutex_trylock while dumping statedumps
   
   Change-Id: I2b04dc35a51d940915197cf8e26e638f32fa4d7b
   BUG: 843821
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3802
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------

commit a1d071374365a10ebef508c38c39f61da0a0f855 Author: Amar Tumballi
<amarts@redhat.com> Date: Thu Jul 26 17:16:00 2012 +0530

--------------------------------------------------------------------
   acl: enable handling of FMODE_EXEC flag
   
   on linux systems, with open(), we can get below flag as per
   'linux/fs.h'.
   
   /* File is opened for execution with sys_execve / sys_uselib */
   '#define FMODE_EXEC              ((fmode_t)0x20)'
   
   Instead of adding '#include <linux/fs.h>, its better to copy this
   absolute number into other variable because then we have to deal
   with declaring fmode_t etc etc..
   
   With the fix, we can handle the file with '0711' permissions in
   the same way as backend linux filesystems.
   
   Change-Id: Ib1097fc0d2502af89c92d561eb4123cba15713f5
   Signed-off-by: Amar Tumballi <amarts@redhat.com>
   BUG: 843960
   Reviewed-on: http://review.gluster.com/3746
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------------

commit 475efecfba7194c598a94879852bcd37ac2deb5d Author: Brian Foster
<bfoster@redhat.com> Date: Wed Jul 25 08:14:38 2012 -0400

---------------------------------------------------------------------
   cluster: fix crash on link of named pipe in stripe/replicate vol
   
   A crash occurs when attempting to link a named pipe on a striped,
   replicated volume. The cause for this crash is attempting to deref
   a NULL inode pointer in stripe_link_cbk(). The RCA for this bug
   uncovered a couple of problems:
   
   - AFR ignores the inode pointer it receives on failure (returning
     NULL).
   - stripe assumes the inode pointer is valid on failure.
   
   Either one of these changes addresses the crash, but this patch
   includes both changes. AFR is modified to pass along the inode
   pointer it receives (which could still be NULL). stripe is
   modified to not assume the inode pointer is valid on fop failure.
   
   BUG: 842825
   Change-Id: I368849b7cfbb137a08ae5f89d26406814ff5bb09
   Signed-off-by: Brian Foster <bfoster@redhat.com>
   Reviewed-on: http://review.gluster.com/3790
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
---------------------------------------------------------------------

commit e741983b740a26634b8d371521da2f668ec8e584 Author: Brian Foster
<bfoster@redhat.com> Date: Wed Aug 8 07:44:43 2012 -0400

------------------------------------------------------------------------
   cluster/stripe: don't fail if no fctx on a non-regular file
   
   cluster/stripe broke directory rename. Only check for fctx on regular
   files.
   
   BUG: 842652
   Change-Id: I29d7b265cbe40921226feb3e1c4e6b97b3a01d95
   Signed-off-by: Brian Foster <bfoster@redhat.com>
   Reviewed-on: http://review.gluster.com/3789
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
------------------------------------------------------------------------

commit 0c1cee625818275dd1b3f6718bd246d2e30dabd1 Author: Kaleb S.
KEITHLEY <kkeithle@redhat.com> Date: Tue Jul 10 10:19:16 2012 -0400

----------------------------------------------------------------------------
   calls to dict_allocate_and_serialize() are not 64-bit clean
   
   All calls to dict_allocate_and_serialize() pass the address of a 32-bit
   type, but must cast it to the 64-bit pointer type (size_t *).
   
   This happens to work on LE machines, but even if it's apparently benign,
   it's still a bug. On BE machines it is not benign.
   
   GF_PROTOCOL_DICT_SERIALIZE() hacks around it by creating a size_t temp
   var, but that's, well, a hack, IMO when you consider that all the callers
   are actually passing &<u_int>; the param should just be a u_int * and
   eliminate the buggy casts and the temp var in the macro.
   
   Nobody apparently uses the Fedora/EPEL PPC RPMs, but they might. People
   are trying to build gluster.org bits on SPARC and tripping over this.
   
   Change-Id: I92ea139f9e3e91ddbbb32a51b96fa582a9515626
   Signed-off-by: Kaleb S. KEITHLEY <kkeithle@redhat.com>
   BUG: 838928
   Reviewed-on: http://review.gluster.com/3643
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------------

commit f1a0ec826be94f2d0413dd819fd7033c437843f9 Author: Anand Avati
<avati@redhat.com> Date: Mon Jun 25 19:37:09 2012 -0700

----------------------------------------------------------------
   nfs: make NFS filehandles deterministic
   
   The NFS3 file handles now includes just the bare minimum of
   (ident, exportid, gfid) and removes legacy 'variable' members
   which are unnecessary since the introduction of GFID backend
   
   Change-Id: Iff6e4435d170074b18d208742b48e79b130e2a4d
   BUG: 835336
   Signed-off-by: Anand Avati <avati@redhat.com>
   Reviewed-on: http://review.gluster.com/3617
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------

commit d451dfeb4643b1894e99dc66454f630d26c459a1 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Mon Jun 11 11:38:14 2012 +0530

--------------------------------------------------------------
   cli: Change cli output for heal commands
   
   BUG: 826406
   Change-Id: Ic32c89b92314ee201ec67afc4617e412d4b4c21d
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3636
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit 1cc71909a619ee9f081ccb0646aeb015fd6f7598 Author: Krishnan
Parthasarathi <kp@gluster.com> Date: Sat Jun 30 17:04:26 2012 +0530

-----------------------------------------------------------------------------
   rpc: Fixed ping timer algo.
   
   The purpose of the ping timer is to assert the absence of any evidence
   the server is possibly alive.
   
   The current implementation updates the 'last_sent' timer in the following
   points in time,
   - rpc_clnt_submit: when rpc messages are being queued at the transport
     layer. (wrong!, since we have no way to determine if server actually
     received the message)
   - rpc_clnt_notify: when client receives pollout event on sending a message
     on the 'wire'. (correct, since it indicates ACK from server)
   
   The fix removes the 'incorrect' update of 'last_sent'.
   
   Change-Id: I56af7b15c3672673696977a7c50ee66eafa4ec55
   BUG: 836448
   Signed-off-by: Krishnan Parthasarathi <kp@gluster.com>
   Reviewed-on: http://review.gluster.com/3624
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Jeff Darcy <jdarcy@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-----------------------------------------------------------------------------

commit 31e81065edc26378eabdd4785f5dd689719cd126 Author: shishir gowda
<sgowda@redhat.com> Date: Fri Jun 22 13:28:31 2012 +0530

-------------------------------------------------------------------
   cluster/dht: Remove dht dependency on glusterfsd-mgmt
   
   glusterfs_ctx->notify can be used by any xlator to talk to
   glusterfsd-mgmt.
   Note- This is for any rpc communication initiated by the xlator,
         and not from glusterd.
   
   Change-Id: Ic0e4af106fe1e98d797ca621facda8839b87598a
   BUG: 835757
   Signed-off-by: shishir gowda <sgowda@redhat.com>
   Reviewed-on: http://review.gluster.com/3610
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Jeff Darcy <jdarcy@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-------------------------------------------------------------------

commit 84d0f889eab947b58a0f6e8d0eda5ae84c15a6c7 Author: Raghavendra G
<raghavendra@gluster.com> Date: Tue May 29 10:02:52 2012 +0530

------------------------------------------------------------------------
   rpc-transport/rdma: decode and handle RDMA_ERROR msgs.
   
   RDMA_ERROR msgs are resulted as part of failure to decode requests
   or failure to send reply (for eg., reply being bigger than a msg
   that can be sent inline, but client has not provided any write-chunks
   to rdma-write into).
   
   Change-Id: I0184cfb5ff8f49ed892767345e32e6c7b01c49e7
   BUG: 822337
   Signed-off-by: Raghavendra G <raghavendra@gluster.com>
   Reviewed-on: http://review.gluster.com/3475
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
------------------------------------------------------------------------

commit f2b709054d6eec89760bb3513f7b27209c6a6ea7 Author: Kaushal M
<kaushal@redhat.com> Date: Tue Jun 5 15:02:49 2012 +0530

--------------------------------------------------------------
   glusterd: Set errstr for duplicate add-brick
   
   Sets op_errstr when add-brick is given a duplicate brick.
   
   BUG: 832293
   Change-Id: I2d6d13b2ca29615678902b56e6b394ea05f37923
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.com/3585
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit b8d5208f5c8945debe565ae72fea5a3795a44dfe Author: shishir gowda
<sgowda@redhat.com> Date: Wed Jul 25 13:08:14 2012 +0530

------------------------------------------------------------------------
   cluster/distribute: Suppress user xattr mismatch log message
   
   Changing the log-level to DEBUG.
   Xattr mismatch can occur when parallel setxattr's race, or when
   one of the bricks was down. A subsequent setxattr will fix the
   condition when all the subvols are up. In this case, the 'user.swift'
   xattr used by ufo was out of sync, but did not cause any other error.
   
   Change-Id: I6fdff78869b8ff72c305bbe122033e6c1d9d3cff
   BUG: 838197
   Signed-off-by: shishir gowda <sgowda@redhat.com>
   Reviewed-on: http://review.gluster.com/3723
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Mohammed Junaid <junaid@redhat.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
------------------------------------------------------------------------

commit 98564a3de126658190c7d54873d4ea2adab59bd8 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Wed Jul 11 23:00:27 2012 +0530

--------------------------------------------------------------------------
   storage/posix: handle getxattr failures gracefully
   
   Use proper variable types for getting return value of getxattr calls,
   which otherwise can lead to segfaulting of processes or page allocation
   failures in the kernel.
   
   Change-Id: Idc41b4022401c238d17ba357648234f7c2d56c87
   BUG: 838195
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3658
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------------------

commit ed9a37fdf4c110697a3c6201764be7ccbb91573e Author: Kaushal M
<kaushal@redhat.com> Date: Wed Jun 27 11:04:48 2012 +0530

-----------------------------------------------------------------------------
   glusterd: Fix peer probe when username/password is missing
   
   Prevent failure of building volumes dictionary during peer probe, when
   username/password for a volume is missing. This situation can be caused by
   migration of gluster from pre-3.3 to 3.3 and above.
   
   BUG: 834229
   Change-Id: I042ecfcc5024e6b18c4ffb44ea0977ec58e22ef8
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.com/3629
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-----------------------------------------------------------------------------

commit 01b365d5bba3bea0847bc79fb5dfe82e5c75dc91 Author: Csaba Henk
<csaba@redhat.com> Date: Wed Jun 13 14:15:14 2012 +0530

----------------------------------------------------------------
   geo-rep / gsyncd: fixes to communication with child processes
   
   due to not using the proper Python keyword, errhandler thread
   was possible to run into empty select
   
   Signed-off-by: Csaba Henk <csaba@redhat.com>
   BUG: 764678
   Change-Id: I3c39e718e72545c27d50fd73aa6daf54062331b0
   Reviewed-on: http://review.gluster.com/3562
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------

commit c0a5348af37c634cc61fa72251e029a3a0301eca Author: Rajesh
Amaravathi <rajesh@redhat.com> Date: Wed May 23 14:08:37 2012 +0530

--------------------------------------------------------------
   nfs/nlm: statedump of locks
   
   This change allows statedump of nlm locks
   giving number of clients, number of locks
   each client holds and the files on which lock(s)
   is/are held.
   
   Change-Id: I6341c12ec58005ef71b93b316b527e610ff7ee8f
   BUG: 824804
   Signed-off-by: Rajesh Amaravathi <rajesh@redhat.com>
   Reviewed-on: http://review.gluster.com/3492
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Pranith Kumar Karampuri <pranithk@gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
--------------------------------------------------------------

commit 1e1a162fa7ea5b6275a0212273ca96b4de410c00 Author: Brian Foster
<bfoster@redhat.com> Date: Mon May 7 13:53:31 2012 -0400

-----------------------------------------------------------------------
   cluster/stripe: implement the coalesce stripe file format
   
   The coalesce file format for cluster/stripe condenses the striped
   files to a contiguous layout. The elimination of holes in striped
   files eliminates space wasted via local filesystem preallocation
   heuristics and significantly improves read performance.
   
   Coalesce mode is implemented with a new 'coalesce' xlator option,
   which is user-configurable and disabled by default. The format of
   newly created files is marked with a new 'stripe-coalesce' xattr.
   Cluster/stripe handles/preserves the format of files regardless
   of the current mode of operation (i.e., a volume can
   simultaneously consist of coalesced and non-coalesced files).
   Files without the stripe-coalesce attribute are assumed to have
   the traditional format to provide backward compatibility.
   
   extras/stripe-merge: support traditional and coalesce stripe formats
   
   Update the stripe-merge recovery tool to handle the traditional
   and coalesced file formats. The format of the file is detected
   automatically (and verified) via the stripe-coalesce attributes.
   
   BUG: 801887
   Change-Id: I682f0b4e819f496ddb68c9a01c4de4688280fdf8
   Signed-off-by: Brian Foster <bfoster@redhat.com>
   Reviewed-on: http://review.gluster.com/3639
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
-----------------------------------------------------------------------

commit 1d1639019284f9baaee9d8f4b7d617c6edb52eec Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:47:29 2012 +0200

---------------------------------------------------------------------------
   Use inet as default listene
   This is backport of Change-Id: I172570aa58ea08c4c74cfd28f121d3d4e02a55e0
   
   BUG: 764655
   Change-Id: I60232b73c303d296e34871ed317925c9af0d322e
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3575
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
---------------------------------------------------------------------------

commit 74d7d2d53c539c822cf7b6da44a515f1e326c5bc Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jul 6 16:53:35 2012 +0200

-----------------------------------------------------------------------------
   NetBSD build fixes
   This is a backport of Change-Id: Icd7290f1e340675d763665a0d0c5f95bc14e0c55
   
   BUG: 764655
   Change-Id: Iaca3dc30e61c0864af673b90d2a7fdea6a3143cc
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3577
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-----------------------------------------------------------------------------

commit e14095fbbe5c410863ffca865803762dd8cf6e87 Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:58:53 2012 +0200

-----------------------------------------------------------------------------
   Use linkat(2) for symlink to get portable behavior
   This is a backport of Change-Id: If7f6f17b48a4ccf8827c3795ec147306df6b5542
   
   BUG: 764655
   Change-Id: I374aca5d72d003d67a2bdc9a22b88ce7dd412a0d
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3580
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-----------------------------------------------------------------------------

commit f626ea8e9121baab4c0447f9aaf273e1141a79ed Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:53:34 2012 +0200

-----------------------------------------------------------------------------
   Set LD_LIBRARY_PATH before starting glusterfs
   This is a backport of Change-Id: I13bf0bea043351498b4bc885c5ac45b108229a0a
   
   BUG: 764655
   Change-Id: I7908352f7a9baae48a7c3bd2c8845980d0dc9b96
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3578
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-----------------------------------------------------------------------------

commit ca297bc9ba096c64e182872692981a1d7ee250fa Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:55:28 2012 +0200

-----------------------------------------------------------------------------
   stat(1) flag to specify format is not portable
   This is a backport of Change-Id: Iae3c40b03118078530c29d14d5f7180c36361c16
   
   BUG: 764655
   Change-Id: Ic4e7adbda6b53b248aa93cd20a045cb885fa818e
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3579
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
-----------------------------------------------------------------------------

commit 6ee9d105695e4fd8ea86d8c173b234e2df12eb51 Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:49:15 2012 +0200

----------------------------------------------------------------------------
   Switch to GNU basename_r() and dirname_r()
   This is a backport of Change-Id Ic9a159fffdc7bacc9408f8e90854e4c2db81930c
   and Id874b9c7aacd9aa3a7a4bd6a92a9633f5b2d6ac0
   
   BUG: 764655
   Change-Id: I51aac601fb4cc9a0d87afcab2240dc7a1d131c93
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3576
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vbellur@redhat.com>
----------------------------------------------------------------------------

commit a091f75386fee1499553546e4e6849dabec77338 Author: Csaba Henk
<csaba@redhat.com> Date: Tue May 22 14:03:32 2012 +0530

------------------------------------------------------------------------
   geo-rep / gsyncd: sanitize error log of external commands
   
   If a command invoked by gsyncd fails, gsyncd makes a log
   of what comes out on its stderr. So far the log indeterministically
   broke lines at random places. Now put some effort into reconstructing
   original lines and having a faithful log.
   
   BUG: 764678
   Change-Id: I16fcc75d3e0f624c10c71d9b37c937ca677087cc
   Signed-off-by: Csaba Henk <csaba@redhat.com>
   Reviewed-on: http://review.gluster.com/3563
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
------------------------------------------------------------------------

commit d98068a71b63330180281e09347c02d69213c2aa Author: Emmanuel Dreyfus
<manu@netbsd.org> Date: Fri Jun 15 09:45:23 2012 +0200

-----------------------------------------------------------------------------
   NetBSD build fixes.
   This is a backport of Change-Id: Ib8183d4b585465d05a7adf3a4ceae93ae1bded15
   
   BUG: 764655
   Change-Id: I552b87b72c234b3a11af6ffd4a03975879602363
   Signed-off-by: Emmanuel Dreyfus <manu@netbsd.org>
   Reviewed-on: http://review.gluster.com/3574
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
-----------------------------------------------------------------------------

commit d3f1007400735812c88353ed6b0a49d9d4d2c7b2 Author: Kaushal M
<kaushal@redhat.com> Date: Mon Jun 4 09:56:33 2012 +0530

--------------------------------------------------------------
   libglusterfs: valid_host_name() fix
   
   Fix valid_host_name() to allow single character hostnames.
   
   BUG: 827403
   Change-Id: Ie8df0114cee55b0472b83c077b8ac4fc952f5acd
   Signed-off-by: Kaushal M <kaushal@redhat.com>
   Reviewed-on: http://review.gluster.com/3516
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit 0c95f6bdb0d934384111aabab0ee2d8980102a50 Author: Raghavendra G
<raghavendra@gluster.com> Date: Mon May 28 16:55:52 2012 +0530

-------------------------------------------------------------------
   protocol/client: provide a buffer for storing reply of readlink.
   
   since a readlink response can be bigger than size of rdma-msges
   that can be inlined, we need to provide a buffer where server
   can do an rdma-write of response.
   
   Change-Id: I6ab06c3a94702f810ab0c57b409aaaf35cc93057
   BUG: 822337
   Signed-off-by: Raghavendra G <raghavendra@gluster.com>
   Reviewed-on: http://review.gluster.com/3463
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Tested-by: Amar Tumballi <amarts@redhat.com>
-------------------------------------------------------------------

commit b8fccb47dd43977150ce4c14a1889b2c82917711 Author: Raghavendra G
<raghavendra@gluster.com> Date: Fri May 25 16:41:14 2012 +0530

--------------------------------------------------------------
   rpc-transport/rdma: logging enhancements
   
   Signed-off-by: Raghavendra G <raghavendra@gluster.com>
   Change-Id: I07f00fb768dfdabdc04b43fdb8a0609098cd1838
   BUG: 822337
   Reviewed-on: http://review.gluster.com/3447
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit 4f31c4ccd36ed446f705fa7537e81b753de3d85d Author: Amar Tumballi
<amarts@redhat.com> Date: Mon Jun 4 16:05:49 2012 +0530

--------------------------------------------------------------
   mount.glusterfs: update the glusterd WORKDIR
   
   Change-Id: I70d091611d314598412b5315adcbe1b5147a8773
   Signed-off-by: Amar Tumballi <amarts@redhat.com>
   BUG: 824231
   Reviewed-on: http://review.gluster.com/3512
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit 8519baae01b64c3d102b2af6e6e8912f17907fb2 Author: Krishna Srinivas
<ksriniva@redhat.com> Date: Wed May 23 03:37:16 2012 +0530

-------------------------------------------------------------------------
   nfs/nlm: when setting nlmclnt->rpc_clnt, do not overwrite old rpc_clnt
   
   Change-Id: I01a1c0c0c8d3402b8fe061258001eea2c0029e83
   BUG: 819518
   Signed-off-by: Krishna Srinivas <ksriniva@redhat.com>
   Reviewed-on: http://review.gluster.com/3433
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
-------------------------------------------------------------------------

commit a0cf60dc59642b4b4db24173fb9ab1bb81c10a89 Author: Raghavendra Bhat
<raghavendra@redhat.com> Date: Wed May 30 22:34:25 2012 +0530

---------------------------------------------------------------------------------
   cluster/dht: set conf->defrag to NULL after freeing the defrag structure
   
   Also no need to free the xlator object after rebalance is over, as the process
   is about to be killed.
   
   Change-Id: I6973e43c0353b5de61c0b39e52a22c618be361f4
   BUG: 826584
   Signed-off-by: Raghavendra Bhat <raghavendra@redhat.com>
   Reviewed-on: http://review.gluster.com/3495
   Reviewed-by: Amar Tumballi <amarts@redhat.com>
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Anand Avati <avati@redhat.com>
   Reviewed-on: http://review.gluster.com/3607
   Reviewed-by: Shishir Gowda <sgowda@redhat.com>
---------------------------------------------------------------------------------

commit e2f1d73017894f893889b78135331355eb86836e Author: Pranith Kumar K
<pranithk@gluster.com> Date: Fri Jun 15 12:21:15 2012 +0530

------------------------------------------------------------------------
   cluster/afr: split-brain should be reset on data-self-heal
   
   If the govinda flag is set in the beginning then missing_entries_done
   will fail the self-heal before it can come to data_self_heal.
   
   Change-Id: I4d5b6a7c3bb26bae78979ee59c7c0997fd3fd84b
   BUG: 832305
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3583
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
------------------------------------------------------------------------

commit 27bc10d67b9502c03668ca851e8330485cb5e2b5 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Tue Jun 12 19:39:49 2012 +0530

--------------------------------------------------------------
   cluster/afr: Treat EEXIST as success in hardlink
   
   Change-Id: I6711fe9230553306eab6012edea8de157a336a78
   BUG: 831151
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3549
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit a04bbeafa9b96c0f05e6403749d2b8002b6c4f12 Author: Pranith Kumar K
<pranithk@gluster.com> Date: Thu Jun 7 14:01:46 2012 +0530

--------------------------------------------------------------
   cli: Fix time_t conversions
   
   Change-Id: I98eb76e5971ea800a249d21557d5dd4f093fdaaf
   BUG: 828058
   Signed-off-by: Pranith Kumar K <pranithk@gluster.com>
   Reviewed-on: http://review.gluster.com/3534
   Reviewed-by: Kaleb KEITHLEY <kkeithle@redhat.com>
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Niels de Vos <ndevos@redhat.com>
   Tested-by: Joe Julian <me@joejulian.name>
   Reviewed-by: Joe Julian <me@joejulian.name>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit 7ded1a6e11dae194f04d8717125ff5c18066731e Author: Mohammed Junaid
<junaid@redhat.com> Date: Mon Jun 11 16:39:17 2012 +0530

-----------------------------------------------------------------------------------
   swift: Donot display async_pending container.
   
   async_pending container is for internal, should not be exposed to the users on a
   GET.
   
   Change-Id: I460242667ae0cb5e96d4c63296f0bae4bb83b28e
   BUG: 829137
   Signed-off-by: Mohammed Junaid <junaid@redhat.com>
   Reviewed-on: http://review.gluster.com/3546
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
-----------------------------------------------------------------------------------

commit 93e9c02599e710bac112ac19ac4932ac4ad52a25 Author: Vijay Bellur
<vijay@gluster.com> Date: Thu May 31 23:10:01 2012 +0530

--------------------------------------------------------------
   doc: Changes in Hadoop to reflect the right RPM
   
   Change-Id: Ieb179affe5cb3c7d3ae1ca1e47c1a76ada876ced
   Reviewed-on: http://review.gluster.com/3499
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Venky Shankar <vshankar@redhat.com>
--------------------------------------------------------------

commit 6d602670ef63e184492e19ed2dea6095db3ec36e Author: Csaba Henk
<csaba@redhat.com> Date: Fri Mar 9 09:11:23 2012 +0100

---------------------------------------------------------------------------------------------
   geo-rep / gsyncd: fix cleanup of temporary mounts
   
   [This is a "forward port" of fafd5c17, http://review.gluster.com/2908]
   
   The "finally" clause that was meant to cleanup after the
   temp mount has not covered the case of getting signalled
   (eg. by monitor, upon worker timing out).
   
   So here we "outsource" the cleanup to an ephemeral child process.
   Child calls setsid(2) so it won't be bothered by internal process
   management. We use a pipe in between worker and the cleanup child;
   when child sees the worker end getting closed, it performs the cleanup.
   Worker end can get closed either because worker closes it (normal case),
   or because worker has terminated (faulty case) -- thus as bonus, we get
   a nice uniform handling with no need to differentiate between normal and
   faulty cases.
   
   The faulty case that was seen IRL -- ie., users of maintainance mounts
   hang in chdir(2) to mount point -- can be simulated for testing purposes
   by applying the following patch:
   
     diff --git a/xlators/mount/fuse/src/fuse-bridge.c b/xlators/mount/fuse/src/fuse-bridge.c
     index acd3c68..1ce5dc1 100644
     --- a/xlators/mount/fuse/src/fuse-bridge.c
     +++ b/xlators/mount/fuse/src/fuse-bridge.c
     @@ -2918,7 +2918,7 @@ fuse_init (xlator_t *this, fuse_in_header_t *finh, void *msg)
              if (fini->minor < 9)
                      *priv->msg0_len_p = sizeof(*finh) + FUSE_COMPAT_WRITE_IN_SIZE;
      #endif
     -        ret = send_fuse_obj (this, finh, &fino);
     +        ret = priv->client_pid_set ? 0 : send_fuse_obj (this, finh, &fino);
              if (ret == 0)
                      gf_log ("glusterfs-fuse", GF_LOG_INFO,
                              "FUSE inited with protocol versions:"
   
   Change-Id: I14bad56a60a7fa82d0104fa4b9a20f4e42a7186f
   BUG: 786291
   Signed-off-by: Csaba Henk <csaba@redhat.com>
   Reviewed-on: http://review.gluster.com/3542
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
---------------------------------------------------------------------------------------------

commit 05ad7e460c9f7ab7759313dfcd07ab37f9acd2b2 Author: Mohammed Junaid
<junaid@redhat.com> Date: Thu May 31 22:24:25 2012 +0530

--------------------------------------------------------------
   swift: Updated the UFO admin guide for 3.3.
   
   Also, added a script to install the new rpm's.
   
   Change-Id: I66ba72822046d5930d021073a0cd918aafda6c24
   BUG: 811430
   Signed-off-by: Mohammed Junaid <junaid@redhat.com>
   Reviewed-on: http://review.gluster.com/3498
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit 281c79c3766ca6a912e419d0cde24d1b8c457cbe Author: Amar Tumballi
<amarts@redhat.com> Date: Fri Jun 1 10:30:34 2012 +0530

--------------------------------------------------------------
   doc: added release-notes directory
   
   Change-Id: Idd45c0fe6a0615a3204aad216002894746cea03c
   Signed-off-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-on: http://review.gluster.com/3501
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------

commit f037fe9143706375bea140b61fd87d13e5b2b961 Author: Amar Tumballi
<amarts@redhat.com> Date: Mon May 28 19:32:14 2012 +0530

--------------------------------------------------------------
   documentation - Admin-Guide Updates
   
   Change-Id: I6e053b6a5f099fb7b1c228668949463c795b4fc7
   Signed-off-by: Amar Tumballi <amarts@redhat.com>
   Reviewed-on: http://review.gluster.com/3496
   Tested-by: Gluster Build System <jenkins@build.gluster.com>
   Reviewed-by: Vijay Bellur <vijay@gluster.com>
--------------------------------------------------------------
